<!DOCTYPE html>
<meta charset="utf-8">
<style>

    circle {
        fill: rgb(31, 119, 180);
        fill-opacity: .25;
        stroke: rgb(31, 119, 180);
        stroke-width: 1px;
    }

    .leaf circle {
        fill-opacity: 1;
    }

    text {
        font: 10px sans-serif;
        text-anchor: middle;
    }

</style>
<div id="legend">
    The <b>size</b> of a component represents the complexity of a component. The bigger the circle, the more complex a component. <br/>
    The <span style="color: red;">color</style></span> represents the number of commits. The brighter red, the more active a component has been worked on. <br/>
    <br/>
    The big circles that are brightly red are interesting to investigate further: complex code where a lot of work is performed. <br/>
    <br/>
    Hover over a component to view complexity/commit details.
</div>
<div style="display: flex; justify-content: center"> <svg width="960" height="960"></svg></div>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
<script>
    let root = {
"name:": "Meethra",
"children": [
{
"entity": "./Server/Application/Auctions/AuctioningFacade.cs",
"linesofcode": 2777,
"numbercommits": 269
},
{
"entity": "./Intranet/Web/UI/Agreements/AllocationAgreement/Default.aspx.cs",
"linesofcode": 2613,
"numbercommits": 83
},
{
"entity": "./Server/Resources/Services/AggregatingReceivingStationCapacityDistributionService/AggregatedReceivingStationCapacityDistributionService.cs",
"linesofcode": 2335,
"numbercommits": 13
},
{
"entity": "./Server/Application/Requests/AssignmentRequestFacade.cs",
"linesofcode": 1974,
"numbercommits": 110
},
{
"entity": "./Intranet/Web/UI.BEL/Agreements/MasterAgreement/Default.aspx.cs",
"linesofcode": 1951,
"numbercommits": 20
},
{
"entity": "./Server/Application.BEL/Requests/RequestFacade.cs",
"linesofcode": 1903,
"numbercommits": 87
},
{
"entity": "./Server/Domain/Auctions/DomainServices/AuctionDomainService.cs",
"linesofcode": 1380,
"numbercommits": 137
},
{
"entity": "./Server/Reports/Allstars/AllstarsAllocations.Designer.cs",
"linesofcode": 1348,
"numbercommits": 2
},
{
"entity": "./Server/Application/BusinessParties/BusinessPartyFacade.cs",
"linesofcode": 1188,
"numbercommits": 33
},
{
"entity": "./Server/Application/Agreements/AllocationAgreementFacade.cs",
"linesofcode": 1163,
"numbercommits": 108
},
{
"entity": "./Server/Domain/Stocks/StockDomainService.cs",
"linesofcode": 1093,
"numbercommits": 54
},
{
"entity": "./Intranet/Web/UI.BEL/Offers/Offer/Default.aspx.cs",
"linesofcode": 1012,
"numbercommits": 16
},
{
"entity": "./Server/Domain/Auctions/DomainServices/DEU/AuctionDomainService.cs",
"linesofcode": 1002,
"numbercommits": 43
},
{
"entity": "./Server/Application.DEU/Messages/MessageFacade.cs",
"linesofcode": 1001,
"numbercommits": 77
},
{
"entity": "./Intranet/Web/UI.BEL/Agreements/ConnectionAgreement/Default.aspx.cs",
"linesofcode": 963,
"numbercommits": 4
},
{
"entity": "./Server/Application/Messages/MessageFacade.cs",
"linesofcode": 911,
"numbercommits": 99
},
{
"entity": "./Intranet/Web/UI/Styles/Mithra.css",
"linesofcode": 910,
"numbercommits": 39
},
{
"entity": "./Server/Application.BEL/QualityConversionH2L/QualityConversionH2LFacade.cs",
"linesofcode": 878,
"numbercommits": 13
},
{
"entity": "./Intranet/Web/UI/Scripts/controls.js",
"linesofcode": 878,
"numbercommits": 4
},
{
"entity": "./Intranet/Web/UI.BEL/Requests/Reduction/ReductionServiceManager.ascx.cs",
"linesofcode": 849,
"numbercommits": 28
},
{
"entity": "./Server/Application/Agreements/MasterAgreementFacade.cs",
"linesofcode": 828,
"numbercommits": 11
},
{
"entity": "./Intranet/Web/UI.BEL/Requests/Request/Default.aspx.cs",
"linesofcode": 794,
"numbercommits": 25
},
{
"entity": "./Server/Endpoints.BEL/Generic/CapacityService.cs",
"linesofcode": 781,
"numbercommits": 15
},
{
"entity": "./Server/Tests/TestData/DomainTypesTestData.cs",
"linesofcode": 775,
"numbercommits": 13
},
{
"entity": "./Intranet/Web/UI/Agreements/GasExchangeAgreement/Default.aspx.cs",
"linesofcode": 775,
"numbercommits": 7
},
{
"entity": "./Intranet/Resources/Services/AgreementService/AgreementService.cs",
"linesofcode": 771,
"numbercommits": 15
},
{
"entity": "./Intranet/Web/UI.BEL/Products/Product/Default.aspx",
"linesofcode": 763,
"numbercommits": 9
},
{
"entity": "./Intranet/Web/UI.BEL/Requests/Reduction/Offer/Default.aspx.cs",
"linesofcode": 759,
"numbercommits": 14
},
{
"entity": "./Intranet/Web/UI.BEL/Offers/Offer/TransmissionServiceManager.ascx.cs",
"linesofcode": 721,
"numbercommits": 16
},
{
"entity": "./Intranet/Web/UI/Scripts/jquery.tablesorter.js",
"linesofcode": 719,
"numbercommits": 2
},
{
"entity": "./Extranet/Web/UI/Scripts/jquery.tablesorter.js",
"linesofcode": 719,
"numbercommits": 1
},
{
"entity": "./Intranet/Web/UI/Scripts/jquery.tablesorter-original.js",
"linesofcode": 707,
"numbercommits": 1
},
{
"entity": "./Server/Tests/UnitTests.Domain/Requests/TradeNotification.Xml/GivenATradeNotificationXmlBase.cs",
"linesofcode": 700,
"numbercommits": 41
},
{
"entity": "./Intranet/Web/UI/Scripts/ui.dropdownchecklist-1.4-adapted.js",
"linesofcode": 699,
"numbercommits": 1
},
{
"entity": "./Server/Domain/Auctions/DomainServices/BEL/AuctionDomainService.cs",
"linesofcode": 694,
"numbercommits": 35
},
{
"entity": "./Server/Application.BEL/Agreements/MasterAgreementFacade.cs",
"linesofcode": 689,
"numbercommits": 23
},
{
"entity": "./Intranet/Web/UI.DEU/Agreements/MasterAgreement/Default.aspx.cs",
"linesofcode": 689,
"numbercommits": 12
},
{
"entity": "./Server/Domain/DomainServices/StockDomainService.cs",
"linesofcode": 686,
"numbercommits": 1
},
{
"entity": "./Intranet/Web/UI.BEL/Requests/Assignment/Default.aspx.cs",
"linesofcode": 684,
"numbercommits": 17
},
{
"entity": "./Intranet/Web/UI.BEL/Products/Product/Default.aspx.cs",
"linesofcode": 683,
"numbercommits": 11
},
{
"entity": "./Server/Application/Stocks/StockFacade.cs",
"linesofcode": 675,
"numbercommits": 37
},
{
"entity": "./Intranet/Web/UI.DEU/BusinessParties/Contacts/Default.aspx.cs",
"linesofcode": 672,
"numbercommits": 3
},
{
"entity": "./Server/Application.BEL/TransmissionServices/TransmissionServiceFacade.cs",
"linesofcode": 669,
"numbercommits": 39
},
{
"entity": "./Server/Domain/DomainServices/AuctionDomainService.cs",
"linesofcode": 645,
"numbercommits": 1
},
{
"entity": "./Server/Application/Agreements/GasExchangeAgreementFacade.cs",
"linesofcode": 641,
"numbercommits": 2
},
{
"entity": "./Intranet/Web/UI.BEL/Requests/CapacityConversion/Default.aspx.cs",
"linesofcode": 633,
"numbercommits": 29
},
{
"entity": "./Intranet/Web/UI.BEL/BusinessParties/Contacts/Default.aspx.cs",
"linesofcode": 632,
"numbercommits": 4
},
{
"entity": "./Server/Infrastructure/Rules/RuleCode.cs",
"linesofcode": 240,
"numbercommits": 83
},
{
"entity": "./Server/Application/Requests/CapacityConversionRequestFacade.cs",
"linesofcode": 627,
"numbercommits": 73
},
{
"entity": "./Server/Resources/Services/BusinessParametersService/BusinessParametersService.cs",
"linesofcode": 403,
"numbercommits": 63
},
{
"entity": "./Server/Application/Auctions/IAuctioningFacade.cs",
"linesofcode": 137,
"numbercommits": 62
},
{
"entity": "./Server/Hosts/Web.BEL/BootStrapper.cs",
"linesofcode": 294,
"numbercommits": 61
},
{
"entity": "./Versioning/versionspec.xml",
"linesofcode": 234,
"numbercommits": 56
},
{
"entity": "./Intranet/Web/UI/Agreements/AllocationAgreement/Default.aspx",
"linesofcode": 624,
"numbercommits": 56
},
{
"entity": "./Server/Domain/BusinessParameter/IBusinessParametersService.cs",
"linesofcode": 74,
"numbercommits": 53
},
{
"entity": "./Server/Hosts/Web.DEU/BootStrapper.cs",
"linesofcode": 258,
"numbercommits": 53
},
{
"entity": "./Server/Infrastructure/Rules/UnittestRules.cs",
"linesofcode": 220,
"numbercommits": 53
},
{
"entity": "./Server/Endpoints.BEL/TransmissionContractHandlerIntranet/Mapping/AutoMapperConfigurator.cs",
"linesofcode": 403,
"numbercommits": 48
},
{
"entity": "./Server/Endpoints/TransmissionContractHandlerTasksRest/AuctionManagementService.cs",
"linesofcode": 256,
"numbercommits": 45
},
{
"entity": "./Server/Endpoints.DEU/TransmissionContractHandlerIntranet/Mapping/AutoMapperConfigurator.cs",
"linesofcode": 383,
"numbercommits": 44
},
{
"entity": "./Server/Application/Requests/RequestFacade.cs",
"linesofcode": 424,
"numbercommits": 43
},
{
"entity": "./Server/Application/TransmissionServices/TransmissionServiceFacade.cs",
"linesofcode": 314,
"numbercommits": 41
},
{
"entity": "./Server/Endpoints/TransmissionContractHandlerIntranet/AgreementManagementService.cs",
"linesofcode": 590,
"numbercommits": 39
},
{
"entity": "./Extranet/Web/UI/Agreements/AllocationAgreements/AllocationAgreements.aspx.cs",
"linesofcode": 375,
"numbercommits": 38
},
{
"entity": "./Server/Endpoints.DEU/Connect/MessageHandler.cs",
"linesofcode": 16,
"numbercommits": 37
},
{
"entity": "./Server/Domain/Agreements/AllocationAgreement/AllocationAgreement.cs",
"linesofcode": 419,
"numbercommits": 36
},
{
"entity": "./Server/Endpoints/TransmissionContractHandlerIntranet/AuctioningManagementService.cs",
"linesofcode": 334,
"numbercommits": 35
},
{
"entity": "./Server/Application.DEU/Auctions/AuctioningFacade.cs",
"linesofcode": 166,
"numbercommits": 33
},
{
"entity": "./Server/Application/NotificationHandlers/ElectronicAllocationAgreements/ElectronicAllocationNotificationHandler.cs",
"linesofcode": 267,
"numbercommits": 33
},
{
"entity": "./Server/Endpoints.BEL/Connect/MessageHandler.cs",
"linesofcode": 16,
"numbercommits": 32
},
{
"entity": "./Contracts/Server-Intranet/DataContract/Commands/Command.cs",
"linesofcode": 170,
"numbercommits": 31
},
{
"entity": "./Server/Endpoints.BEL/TransmissionContractHandlerIntranet/BusinessPartyManagementService.cs",
"linesofcode": 451,
"numbercommits": 31
},
{
"entity": "./Intranet/Web/UI/Auctions/AuctionProductSetup/Default.aspx.cs",
"linesofcode": 563,
"numbercommits": 31
},
{
"entity": "./Server/Hosts/Web.DEU/AutofacPredefinedRegistrationConventions.cs",
"linesofcode": 294,
"numbercommits": 30
},
{
"entity": "./Server/Endpoints/TransmissionContractHandlerIntranet/TransmissionServiceManagementService.cs",
"linesofcode": 82,
"numbercommits": 30
},
{
"entity": "./Intranet/Web/UI/Agreements/AllocationAgreement/Default.aspx.designer.cs",
"linesofcode": 60,
"numbercommits": 30
},
{
"entity": "./Server/Endpoints/TransmissionContractHandlerIntranet/RequestManagementService.cs",
"linesofcode": 313,
"numbercommits": 29
}
]
}
</script>

<script>

    var svg = d3.select("svg"),
        diameter = +svg.attr("width"),
        g = svg.append("g").attr("transform", "translate(2,2)"),
        format = d3.format(",d");

    var pack = d3.pack()
        .size([diameter - 4, diameter - 4]);

    
        

        var minValue;
        var divideByValue;

        function initValues(childs) {
            var max = calcMax(childs);
            var min = calcMin(childs);



            minValue = min;
            divideByValue = max - min;
        }

        function getColor(value) {
            var opacity = ((value - minValue) / divideByValue);
            return 0.01 + opacity;
        }

        function calcMin(array) {
            var min = Number.MAX_VALUE;
            array.forEach(function (val) {
                min = val.numbercommits < min ? val.numbercommits : min;
            });
            return min;
        }

        function calcMax(array) {
            var max = 0;
            array.forEach(function (val) {
                max = val.numbercommits > max ? val.numbercommits : max;
            });
            return max;
        }

        initValues(root.children);

        root = d3.hierarchy(root)
            .sum(function(d) { return d.linesofcode; })
            .sort(function(a, b) { return b.value - a.value; });

        var node = g.selectAll(".node")
            .data(pack(root).descendants())
            .enter().append("g")
            .attr("class", function(d) { return d.children ? "node" : "leaf node"; })
            .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

        node.append("title")
            .text(function(d) { return d.data.entity + "\n" + format(d.value) + " LOC\n" + format(d.data.numbercommits) + " commits"; });

        node.append("circle")
            .attr("r", function(d) { return d.r; })
            .attr("style", function(d) { if(!d.parent){return;} console.log(d); return 'fill: rgb(255,0,0); opacity: ' + getColor(d.data.numbercommits)});


        node.filter(function(d) { return !d.children; }).append("text")
            .attr("dy", "0.3em")
            .text(function(d) {
                var fileNameAr = d.data.entity.split('/');
                var fileName = fileNameAr[fileNameAr.length -1];
                return fileName.substring(0, d.r / 3); });



</script>